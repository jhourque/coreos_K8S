{"ignition":{"config":{},"timeouts":{},"version":"2.1.0"},"networkd":{},"passwd":{},"storage":{"files":[{"filesystem":"root","group":{},"path":"/etc/kubernetes/cni/docker_opts_cni.env","user":{},"contents":{"source":"data:,DOCKER_OPT_BIP%3D%22%22%0ADOCKER_OPT_IPMASQ%3D%22%22%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/kubernetes/cni/net.d/10-flannel.conf","user":{},"contents":{"source":"data:,%7B%0A%20%20%20%20%22name%22%3A%20%22podnet%22%2C%0A%20%20%20%20%22type%22%3A%20%22flannel%22%2C%0A%20%20%20%20%22delegate%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22isDefaultGateway%22%3A%20true%0A%20%20%20%20%7D%0A%7D%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/kubernetes/ssl/cert_generator.sh","user":{},"contents":{"source":"data:,%23!%2Fbin%2Fbash%0Acd%20%2Fetc%2Fkubernetes%2Fssl%0Anode_Ip%3D${PRIVATE_IPV4}%0Acat%20%3E%20worker-openssl.cnf%3C%3C%20EOF%0A%5Breq%5D%0Areq_extensions%20%3D%20v3_req%0Adistinguished_name%20%3D%20req_distinguished_name%0A%5Breq_distinguished_name%5D%0A%5B%20v3_req%20%5D%0AbasicConstraints%20%3D%20CA%3AFALSE%0AkeyUsage%20%3D%20nonRepudiation%2C%20digitalSignature%2C%20keyEncipherment%0AsubjectAltName%20%3D%20%40alt_names%0A%5Balt_names%5D%0AIP.1%20%3D%20%24node_Ip%0AEOF%0Aopenssl%20genrsa%20-out%20worker-key.pem%202048%0AWORKER_IP%3D%24node_Ip%20openssl%20req%20-new%20-key%20worker-key.pem%20-out%20worker.csr%20-subj%20%22%2FCN%3Dkube-node%2FO%3Dsystem%3Amasters%22%20-config%20worker-openssl.cnf%0AWORKER_IP%3D%24node_Ip%20openssl%20x509%20-req%20-in%20worker.csr%20-CA%20ca.pem%20-CAkey%20ca-key.pem%20-CAcreateserial%20-out%20worker.pem%20-days%20365%20-extensions%20v3_req%20-extfile%20worker-openssl.cnf%0A","verification":{}},"mode":448},{"filesystem":"root","group":{},"path":"/etc/kubernetes/ssl/ca.pem","user":{},"contents":{"source":"data:,-----BEGIN%20CERTIFICATE-----%0AMIIDKTCCAhGgAwIBAgIJAMYhNXy5EUfNMA0GCSqGSIb3DQEBCwUAMCsxEDAOBgNV%0ABAMMB2t1YmUtY2ExFzAVBgNVBAoMDnN5c3RlbTptYXN0ZXJzMB4XDTE3MTIxMTE1%0ANTUyMloXDTQ1MDQyODE1NTUyMlowKzEQMA4GA1UEAwwHa3ViZS1jYTEXMBUGA1UE%0ACgwOc3lzdGVtOm1hc3RlcnMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB%0AAQDITVRdj3nJDIHk7efmnt92FtXXDteLh3382Nv9HZQG2nMgc6LpO6aCTx0jFiC7%0Ae%2BEOhewTMQyGJE0eqERCeyU1E3MpwHsqEQbq12BtaNTpLWmriSQ%2FLq59MF0GAEK3%0AGikCto8gXkR3H4%2F4qnr8IRh6jUgjJ%2Bu2wI5jiKTca5VnAMA27fB5P9wiSD7ozbmV%0AqzV%2BZGyPSa6TgYGjsvvmgRkUzBBvbb073HReQagbMPbKVEf6%2BiXvGkV0xv5b1XmB%0A%2FWYF%2F175fFjiOgSR7GrQwPj9bNg%2F9dHFGzNVs7oG0IUvRRlNJ%2FXBSbvP%2FyeZ40Qs%0A%2F8Kksqod8ttDW7k%2BOZh0rIvfAgMBAAGjUDBOMB0GA1UdDgQWBBTvjUmCa7qfAt9a%0A28jF4DQiJmxRpDAfBgNVHSMEGDAWgBTvjUmCa7qfAt9a28jF4DQiJmxRpDAMBgNV%0AHRMEBTADAQH%2FMA0GCSqGSIb3DQEBCwUAA4IBAQDAWrArJzp4L01E6w9O0DgXOXpa%0Aht8orv0ye936%2FOsKUBI%2B1D79CElC4xtkwvIGA5JCNx7dIuGsLWlxg%2FGCRq4uMUPI%0AMqLEy54X0xh%2FUA%2BkDKHe1t0xRQ5%2Bt2yNqD7aa%2Bj1mSW6kWNdzwAemkb5EHNZxiIg%0AnjKhwSVSaYT%2Fky9nGcXoqJLDscLwkO825UQw0JC4HbX6G%2Fj9wACkMrso%2BDLvenEm%0Aqv7B2hSCz52nByw0m%2FYH%2FOz48CMnL5LnQwRlf4MBPo0fwOI2pzWPWoJteEJ5MzJT%0AYvF8vF%2FFU1yrdkA5pXdzxTjt5WDWyT0x3%2FDTuRnzWYSJE8Pwe6X53zzPleFn%0A-----END%20CERTIFICATE-----%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/kubernetes/ssl/ca-key.pem","user":{},"contents":{"source":"data:,-----BEGIN%20RSA%20PRIVATE%20KEY-----%0AMIIEowIBAAKCAQEAyE1UXY95yQyB5O3n5p7fdhbV1w7Xi4d9%2FNjb%2FR2UBtpzIHOi%0A6Tumgk8dIxYgu3vhDoXsEzEMhiRNHqhEQnslNRNzKcB7KhEG6tdgbWjU6S1pq4kk%0APy6ufTBdBgBCtxopAraPIF5Edx%2BP%2BKp6%2FCEYeo1IIyfrtsCOY4ik3GuVZwDANu3w%0AeT%2FcIkg%2B6M25las1fmRsj0muk4GBo7L75oEZFMwQb229O9x0XkGoGzD2ylRH%2Bvol%0A7xpFdMb%2BW9V5gf1mBf9e%2BXxY4joEkexq0MD4%2FWzYP%2FXRxRszVbO6BtCFL0UZTSf1%0AwUm7z%2F8nmeNELP%2FCpLKqHfLbQ1u5PjmYdKyL3wIDAQABAoIBAQCWPuMklwWsGDSr%0ACwVjSRKnmrNmcJyf7c9ERUqmj3REu8GVuwedWYApyLw7YFLHL0H%2BydfuAWG6kSpD%0A78Xb9FFRgbhlvhrk0AbXSxzqlLL4AXd9Ew7cUeDSyN9OLA3fGMFgZp3vkqZakJNG%0A3GIKE60v6CAPNtepqsBjytCXAh%2F8NRB8%2FlBLeneSrBU0pSwglYLo%2F7posDO6SpdX%0AcDlwdpUXRLIxN6wH%2FufZxPjNsWJ0eKmtABMs%2BDUIq8oAmt%2Fxo99BPQj%2FVxq5yJkL%0AVDKCyhtB3e2l6dzn2nOH57xti9w6x3qYI5Q34BqRHaFNe1kL5aPu8Oq0ERi05%2BRT%0Aq6JlSO%2B5AoGBAPI2xuGf50Fjd9jeZuTyR7Ao1%2BJXYWOwzLp%2FD6PwgLP95U97I9lT%0AZVt1aeS4D3HvWArmL3c4xP%2BE1XES2TJk5HaD7fHWaU%2FzCvH7gONvyWj3cZM1su4i%0A8MlAKVD2CPLQNaIuLVIixi2NmDOLBYjlqjX56jwNGoTfh6ir51ond63zAoGBANOz%0A3hp1Mz1fXau4OVKZya%2Bd%2FmGGK0qOD3BTw4md8OjqS1SsWgb89m8jdzIk34m6%2F%2BoV%0AmabujraBVdIQnn8iXlJzpZDBRnb4p6EWp91kg%2FGCdnvceTXk4Nbrw5Pe16y%2F6agA%0AX4YhplhmvV2u3bKTUzJP9%2FDOxFjBEoimhuRLQyllAoGAH%2FccriAVO%2BrtoSBQwfw7%0Ae8MYIpXXk3l8u0wTe1Y9FgP25FNi%2BsZnxPcs33NvDmFA5EdWkkxaq0ITjRWotl7c%0AS8vDdjwOr%2B9qTV8ctmdFVGX7hir7DzRrRJQEH9woeCsEOQARGRrfvplGMd8x%2FswY%0Ad4Eg6YXtLwX0%2BEyffqVgxQMCgYBLTDh9VJ5K%2F%2FaDM11AIe74hcuKyHvxYqHfJAvy%0AkLi1P1BX542F2seUNBsbPL49cMPBcLlcBJHCHDJ4Ku0U7xZ5YSTMXdJAUqTcyQAf%0A4LaFWg%2Fmcj6yipvmFalUmPhBO2lSFf%2Fj52gRHUnRXncAIyJ%2BTK81eXWg09tRu1lT%0ALenPeQKBgC1fZZ6wTcw%2BXRi9PSNyLPvG6Ucz8sSdTBNZKqe%2B4pD05MsIuoNZE22e%0AP42tGnTxvfB2t6uyJ%2F1pQnurREAeI0xLH5lYB8n4WGXGmM79co1a2YEVioKPNQOe%0AwiV6228wUr%2BnLir%2FFQzarbkhCXYFIW7O6mGiFc0XdqUBWsHzQtTE%0A-----END%20RSA%20PRIVATE%20KEY-----%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/systemd/system/kubelet.service","user":{},"contents":{"source":"data:,%5BService%5D%0AEnvironment%3DKUBELET_IMAGE_TAG%3D${KUBELET_VERSION}%0AEnvironment%3DKUBELET_EXTRA_ARGS%3D--cloud-provider%3Daws%0AEnvironment%3D%22RKT_OPTS%3D--uuid-file-save%3D%2Fvar%2Frun%2Fkubelet-pod.uuid%20%5C%0A%20%20--volume%20dns%2Ckind%3Dhost%2Csource%3D%2Fetc%2Fresolv.conf%20%5C%0A%20%20--mount%20volume%3Ddns%2Ctarget%3D%2Fetc%2Fresolv.conf%20%5C%0A%20%20--volume%20var-log%2Ckind%3Dhost%2Csource%3D%2Fvar%2Flog%20%5C%0A%20%20--mount%20volume%3Dvar-log%2Ctarget%3D%2Fvar%2Flog%22%0AExecStartPre%3D%2Fusr%2Fbin%2Fmkdir%20-p%20%2Fetc%2Fkubernetes%2Fmanifests%0AExecStartPre%3D%2Fusr%2Fbin%2Fmkdir%20-p%20%2Fvar%2Flog%2Fcontainers%0AExecStartPre%3D-%2Fusr%2Fbin%2Frkt%20rm%20--uuid-file%3D%2Fvar%2Frun%2Fkubelet-pod.uuid%0AExecStart%3D%2Fusr%2Flib%2Fcoreos%2Fkubelet-wrapper%20%5C%0A%20%20--cni-conf-dir%3D%2Fetc%2Fkubernetes%2Fcni%2Fnet.d%20%5C%0A%20%20--network-plugin%3Dcni%20%5C%0A%20%20--container-runtime%3Ddocker%20%5C%0A%20%20--register-node%3Dtrue%20%5C%0A%20%20--allow-privileged%3Dtrue%20%5C%0A%20%20--pod-manifest-path%3D%2Fetc%2Fkubernetes%2Fmanifests%20%5C%0A%20%20--hostname-override%3D${HOSTNAME}%20%5C%0A%20%20--cluster_dns%3D10.3.0.10%20%5C%0A%20%20--cluster_domain%3Dcluster.local%20%5C%0A%20%20--kubeconfig%3D%2Fetc%2Fkubernetes%2Fworker-kubeconfig.yaml%20%5C%0A%20%20--tls-cert-file%3D%2Fetc%2Fkubernetes%2Fssl%2Fworker.pem%20%5C%0A%20%20--tls-private-key-file%3D%2Fetc%2Fkubernetes%2Fssl%2Fworker-key.pem%0AExecStop%3D-%2Fusr%2Fbin%2Frkt%20stop%20--uuid-file%3D%2Fvar%2Frun%2Fkubelet-pod.uuid%0ARestart%3Dalways%0ARestartSec%3D10%0A%5BInstall%5D%0AWantedBy%3Dmulti-user.target%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/kubernetes/manifests/kube-proxy.yaml","user":{},"contents":{"source":"data:,apiVersion%3A%20v1%0Akind%3A%20Pod%0Ametadata%3A%0A%20%20name%3A%20kube-proxy%0A%20%20namespace%3A%20kube-system%0Aspec%3A%0A%20%20hostNetwork%3A%20true%0A%20%20containers%3A%0A%20%20-%20name%3A%20kube-proxy%0A%20%20%20%20image%3A%20quay.io%2Fcoreos%2Fhyperkube%3A${KUBELET_VERSION}%0A%20%20%20%20command%3A%0A%20%20%20%20-%20%2Fhyperkube%0A%20%20%20%20-%20proxy%0A%20%20%20%20-%20--master%3Dhttp%3A%2F%2F${PRIVATE_MASTER_IPV4}%3A8080%0A%20%20%20%20-%20--kubeconfig%3D%2Fetc%2Fkubernetes%2Fworker-kubeconfig.yaml%0A%20%20%20%20-%20--proxy-mode%3Diptables%0A%20%20%20%20securityContext%3A%0A%20%20%20%20%20%20privileged%3A%20true%0A%20%20%20%20volumeMounts%3A%0A%20%20%20%20-%20mountPath%3A%20%2Fetc%2Fssl%2Fcerts%0A%20%20%20%20%20%20name%3A%20%22ssl-certs%22%0A%20%20%20%20-%20mountPath%3A%20%2Fetc%2Fkubernetes%2Fworker-kubeconfig.yaml%0A%20%20%20%20%20%20name%3A%20%22kubeconfig%22%0A%20%20%20%20%20%20readOnly%3A%20true%0A%20%20%20%20-%20mountPath%3A%20%2Fetc%2Fkubernetes%2Fssl%0A%20%20%20%20%20%20name%3A%20%22etc-kube-ssl%22%0A%20%20%20%20%20%20readOnly%3A%20true%0A%20%20volumes%3A%0A%20%20-%20name%3A%20%22ssl-certs%22%0A%20%20%20%20hostPath%3A%0A%20%20%20%20%20%20path%3A%20%22%2Fusr%2Fshare%2Fca-certificates%22%0A%20%20-%20name%3A%20%22kubeconfig%22%0A%20%20%20%20hostPath%3A%0A%20%20%20%20%20%20path%3A%20%22%2Fetc%2Fkubernetes%2Fworker-kubeconfig.yaml%22%0A%20%20-%20name%3A%20%22etc-kube-ssl%22%0A%20%20%20%20hostPath%3A%0A%20%20%20%20%20%20path%3A%20%22%2Fetc%2Fkubernetes%2Fssl%22%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/kubernetes/worker-kubeconfig.yaml","user":{},"contents":{"source":"data:,apiVersion%3A%20v1%0Akind%3A%20Config%0Aclusters%3A%0A-%20name%3A%20local%0A%20%20cluster%3A%0A%20%20%20%20certificate-authority%3A%20%2Fetc%2Fkubernetes%2Fssl%2Fca.pem%0A%20%20%20%20server%3A%20https%3A%2F%2F${PRIVATE_MASTER_IPV4}%0Ausers%3A%0A-%20name%3A%20kubelet%0A%20%20user%3A%0A%20%20%20%20client-certificate%3A%20%2Fetc%2Fkubernetes%2Fssl%2Fworker.pem%0A%20%20%20%20client-key%3A%20%2Fetc%2Fkubernetes%2Fssl%2Fworker-key.pem%0Acontexts%3A%0A-%20context%3A%0A%20%20%20%20cluster%3A%20local%0A%20%20%20%20user%3A%20kubelet%0A%20%20name%3A%20kubelet-context%0Acurrent-context%3A%20kubelet-context%0A","verification":{}},"mode":420}]},"systemd":{"units":[{"dropins":[{"contents":"[Service]\nExecStart=\nExecStart=/usr/lib/coreos/flannel-wrapper $FLANNEL_OPTS \\\n  --etcd-endpoints=\"http://${PRIVATE_MASTER_IPV4}:2379\" \\\n  --etcd-prefix=\"/coreos.com/network\" \\\n  --iface=\"${PRIVATE_IPV4}\" \\\n  --public-ip=\"${PRIVATE_IPV4}\"","name":"20-clct-flannel.conf"}],"enable":true,"name":"flanneld.service"},{"enable":true,"name":"flanneld.service"},{"dropins":[{"contents":"[Unit]\nRequires=flanneld.service\nAfter=flanneld.service\n[Service]\nEnvironmentFile=/etc/kubernetes/cni/docker_opts_cni.env\n","name":"40-flannel.conf"}],"enable":true,"name":"docker.service"},{"dropins":[{"contents":"[Service]\nExecStartPre=/etc/kubernetes/ssl/cert_generator.sh\n","name":"50-cert-generator.conf"}],"enable":true,"name":"kubelet.service"}]}}